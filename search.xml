<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>javascript.file</title>
      <link href="/2020/06/05/javascript-file/"/>
      <url>/2020/06/05/javascript-file/</url>
      
        <content type="html"><![CDATA[<h1 id="简述"><a href="#简述" class="headerlink" title="简述"></a>简述</h1><p>在HTML表单中，可以上传文件的唯一控件就是<code>&lt;input type="file"&gt;</code>。</p><blockquote><p>注意：当一个表单包含<code>&lt;input type="file"&gt;</code>时，表单的<code>enctype</code>必须指定为    <code>multipart/form-data</code>，<code>method</code>必须指定为<code>post</code>，浏览器才能正确编码并以<code>multipart/ form-data</code>格式发送表单的数据。</p></blockquote><blockquote><p>出于安全考虑，浏览器只允许用户点击<code>&lt;input type="file"&gt;</code>来选择本地文件，用<code>JavaScript</code>对<code>&lt;input type="file"&gt;</code>的value赋值是没有任何效果的。当用户选择了上传某个文件后，<code>JavaScript</code>也无法获得该文件的真实路径.</p></blockquote><blockquote><p>上传的文件都由后台服务器处理，<code>JavaScript</code>可以在提交表单时对文件扩展名做检查，以便防止用户上传无效格式的文件</p></blockquote><pre class=" language-js"><code class="language-js"><span class="token keyword">var</span> f <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'test-file-upload'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> filename <span class="token operator">=</span> f<span class="token punctuation">.</span>value<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 'C:\fakepath\test.png'</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>filename <span class="token operator">||</span> <span class="token operator">!</span><span class="token punctuation">(</span>filename<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'.jpg'</span><span class="token punctuation">)</span> <span class="token operator">||</span> filename<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'.png'</span><span class="token punctuation">)</span> <span class="token operator">||</span> filename<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'.gif'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Can only upload image file.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h1 id="File-API"><a href="#File-API" class="headerlink" title="File API"></a>File API</h1><p>HTML5的File API提供了<code>File</code>和<code>FileReader</code>两个主要对象，可以获得文件信息并读取文件。</p><h2 id="example"><a href="#example" class="headerlink" title="example:"></a>example:</h2><h3 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h3><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>POST<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://localhost/card.html<span class="token punctuation">"</span></span>         <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>multipart/form-data<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>test-image-preview<span class="token punctuation">"</span></span> <span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>border:1px solid rgb(204,204,204); width:100%; height:200px; background-size:contain;                background-repeat: no-repeat;background-position: center;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>test-image-file<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>test<span class="token punctuation">"</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>s()<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>test-file-info<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span></code></pre><h3 id="JS"><a href="#JS" class="headerlink" title="JS"></a>JS</h3><pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">s</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">var</span>        fileInput <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'test-image-file'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        info <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'test-file-info'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        preview <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'test-image-preview'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 监听change事件:</span>    fileInput<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 清除背景图片:</span>        preview<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundImage <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 检查文件是否选择:</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>fileInput<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>            info<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'没有选择文件'</span><span class="token punctuation">;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// 获取File引用:</span>        <span class="token keyword">var</span> file <span class="token operator">=</span> fileInput<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 获取File信息:</span>        info<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'文件: '</span> <span class="token operator">+</span> file<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'&lt;br>'</span> <span class="token operator">+</span>            <span class="token string">'大小: '</span> <span class="token operator">+</span> file<span class="token punctuation">.</span>size <span class="token operator">+</span> <span class="token string">'&lt;br>'</span> <span class="token operator">+</span>            <span class="token string">'修改: '</span> <span class="token operator">+</span> file<span class="token punctuation">.</span>lastModifiedDate<span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>type <span class="token operator">!==</span> <span class="token string">'image/jpeg'</span> <span class="token operator">&amp;&amp;</span> file<span class="token punctuation">.</span>type <span class="token operator">!==</span> <span class="token string">'image/png'</span> <span class="token operator">&amp;&amp;</span> file<span class="token punctuation">.</span>type <span class="token operator">!==</span> <span class="token string">'image/gif'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'不是有效的图片文件!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// 读取文件:</span>        <span class="token keyword">var</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        reader<span class="token punctuation">.</span>onload <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// 文件读取完成后，自动调用此函数</span>            <span class="token keyword">var</span> data <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>result<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 'data:image/jpeg;base64,/9j/4AAQSk...(base64编码)...'            </span>            preview<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundImage <span class="token operator">=</span> <span class="token string">'url('</span> <span class="token operator">+</span> data <span class="token operator">+</span> <span class="token string">')'</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 以DataURL的形式读取文件:</span>        reader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h1 id="回调"><a href="#回调" class="headerlink" title="回调"></a>回调</h1><p>在<code>JavaScript</code>中，浏览器的<code>JavaScript</code>执行引擎在执行<code>JavaScript</code>代码时，总是以单线程模式执行，也就是说，任何时候，<code>JavaScript</code>代码都不可能同时有多于1个线程在执行.</p><p>在JavaScript中，执行多任务实际上都是异步调用，比如上面的代码：</p><pre class=" language-js"><code class="language-js">reader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>就会发起一个异步操作来读取文件内容。因为是异步操作，所以我们在JavaScript代码中就不知道什么时候操作结束，因此需要先设置一个回调函数：</p><pre class=" language-js"><code class="language-js">reader<span class="token punctuation">.</span>onload <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// 当文件读取完成后，自动调用此函数:</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>当文件读取完成后，JavaScript引擎将自动调用我们设置的回调函数。执行回调函数时，文件已经读取完毕，所以我们可以在回调函数内部安全地获得文件内容。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
        <tags>
            
            <tag> 学习笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdown语法</title>
      <link href="/2020/05/30/Markdown%E8%AF%AD%E6%B3%95/"/>
      <url>/2020/05/30/Markdown%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<pre class=" language-markdown"><code class="language-markdown">标题：<span class="token title important"><span class="token punctuation">#</span>h1 级标题</span><span class="token title important"><span class="token punctuation">##</span>h2 级标题</span><span class="token title important"><span class="token punctuation">###</span>h3 级标题</span><span class="token title important"><span class="token punctuation">####</span>h4 级标题</span><span class="token title important"><span class="token punctuation">#####</span>h5 级标题</span><span class="token title important"><span class="token punctuation">######</span>h6 级标题</span>分割线：三个以上的短线 即可作出分割线<span class="token hr punctuation">---</span>超链接：[连接名称](网址 , 标题)<span class="token url">[我是链接名](http://www.izhangbo.cn, <span class="token string">"我是标题"</span>)</span><span class="token url">[&lt;i class="icon-refresh">&lt;/i> 点我刷新](/sonfilename/)</span>另一种超链接写法：<span class="token url">[链接名][<span class="token variable">链接代号</span>]</span><span class="token url">[here][<span class="token variable">3</span>]</span>然后在别的地方定义 3 这个详细链接信息，<span class="token url-reference url"><span class="token punctuation">[</span><span class="token variable">3</span><span class="token punctuation">]</span><span class="token punctuation">:</span> http://www.izhangbo.cn <span class="token string">"聚牛团队"</span></span>直接展示链接的写法：&lt;http://www.izhangbo.cn>键盘键<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>kbd</span><span class="token punctuation">></span></span>Ctrl+[<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>kbd</span><span class="token punctuation">></span></span> and <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>kbd</span><span class="token punctuation">></span></span>Ctrl+]<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>kbd</span><span class="token punctuation">></span></span>code 格式：反引号Use the <span class="token code keyword">`printf()`</span> function.<span class="token code keyword">`` There is a literal backtick (`) here.针对在代码区段内插入反引号的情况 ``</span>强调：<span class="token italic"><span class="token punctuation">_</span>斜体强调<span class="token punctuation">_</span></span><span class="token bold"><span class="token punctuation">**</span>粗体强调<span class="token punctuation">**</span></span>图片<span class="token url">![Alt text](http://www.izhangbo.cn/wp-content/themes/minty/img/logo.png <span class="token string">"Optional title"</span>)</span>使用 icon 图标文字<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>icon-cog<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>段落：以一个空行开始，以一个空行结束，中间的就是一个段落。表格：| Item     | Value  || -------- | ------ || Computer | \$1600 || Phone    | \$12   || Pipe     | \$1    |无序列表：使用 - 加一个空格（）<span class="token list punctuation">-</span> 无需列表 1<span class="token list punctuation">-</span> 无序列表 2<span class="token list punctuation">-</span> 无序列表 3有序列表：使用 数字 加一个英文句点<span class="token list punctuation">1.</span> 有序列表<span class="token list punctuation">2.</span> 有序列表<span class="token list punctuation">3.</span> 有序列表<span class="token list punctuation">4.</span> 有序列表<span class="token list punctuation">5.</span> 有序列表换行缩进形成代码区块<span class="token code keyword">    这里先换行，然后缩进4个空格，之后的内容便可以原样显示了，适合用于显示代码内容。直到文本结束或最后一个存在缩进的行为止。</span>块引用<span class="token blockquote punctuation">></span> 给引用的文本开始位置都加一个 '>'，<span class="token blockquote punctuation">></span> 便可组成一个块引用。在块引用中，可以结合<span class="token blockquote punctuation">></span> 其他 markdown 元素一块使用，比如列表。<span class="token blockquote punctuation">></span> <span class="token bold"><span class="token punctuation">**</span>强调<span class="token punctuation">**</span></span><span class="token blockquote punctuation">></span> 也可以只在第一行加大于号，其他位置不加。<span class="token blockquote punctuation">></span> <span class="token list punctuation">-</span> 块引用里使用列表，需要和上面的内容隔开一个空行<span class="token blockquote punctuation">></span> <span class="token list punctuation">-</span> 记得加空格哦。</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
        <tags>
            
            <tag> 学习笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Django</title>
      <link href="/2020/05/29/django/"/>
      <url>/2020/05/29/django/</url>
      
        <content type="html"><![CDATA[<h1 id="关于-DRF-ViewSets"><a href="#关于-DRF-ViewSets" class="headerlink" title="关于 DRF ViewSets"></a>关于 DRF ViewSets</h1><ul><li><p>REST 框架包含一个用于处理路由的抽象 ViewSets.</p></li><li><p>当 ViewSet 类被实例化为一组视图时，通常仅在最后一刻将其绑定到一组方法处理程序，通常通过使用一个 Router 类来定义 URL conf 的复杂性</p></li><li><p><code>ModelViewSet</code>类视图集自动提供<code>list</code>，<code>create</code>，<code>检索retrieve</code>，<code>update</code>和<code>destroy</code>actions。</p></li><li><p>默认情况下，使用@action 装饰器的自定义操作将响应 GET 请求。methods 如果我们想要一个响应 POST 请求的动作，则可以使用参数。<br><code>@action(methods=['post'])</code>。</p></li><li><p><code>@action</code>这个装饰可以用来添加不符合标准的任何自定义端点<code>create</code>/ <code>update</code>/ <code>delete</code>风格。</p></li><li><p>默认情况下，自定义操作的 URL 取决于方法名称本身。如果要更改 url 的构造方式，则可以将其 url_path 作为装饰关键字参数。</p></li></ul><h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><h3 id="models-py"><a href="#models-py" class="headerlink" title="models.py"></a>models.py</h3><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models<span class="token keyword">class</span> <span class="token class-name">Testmethods</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>    gets <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">255</span><span class="token punctuation">)</span>    posts <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">255</span><span class="token punctuation">)</span>    deletes <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">255</span><span class="token punctuation">)</span>    options <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">255</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>gets    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>        verbose_name <span class="token operator">=</span> <span class="token string">"测试视图集"</span>        verbose_name_plural <span class="token operator">=</span> verbose_name</code></pre><h3 id="serializers-py"><a href="#serializers-py" class="headerlink" title="serializers.py"></a>serializers.py</h3><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> rest_framework <span class="token keyword">import</span> serializers<span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> Testmethods<span class="token keyword">class</span> <span class="token class-name">TestSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>        model <span class="token operator">=</span> Testmethods        fields <span class="token operator">=</span> <span class="token string">'__all__'</span></code></pre><h3 id="view-py"><a href="#view-py" class="headerlink" title="view.py"></a>view.py</h3><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>decorators <span class="token keyword">import</span> action<span class="token keyword">from</span> rest_framework <span class="token keyword">import</span> viewsets<span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> Testmethods<span class="token keyword">from</span> <span class="token punctuation">.</span>serializers <span class="token keyword">import</span> TestSerializer<span class="token keyword">class</span> <span class="token class-name">methodsviewset</span><span class="token punctuation">(</span>viewsets<span class="token punctuation">.</span>ModelViewSet<span class="token punctuation">)</span><span class="token punctuation">:</span>    app_model <span class="token operator">=</span> Testmethods    queryset <span class="token operator">=</span> Testmethods<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>all<span class="token punctuation">(</span><span class="token punctuation">)</span>    serializer_class <span class="token operator">=</span> TestSerializer    permission_classes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span></code></pre><h3 id="urls-py"><a href="#urls-py" class="headerlink" title="urls.py"></a>urls.py</h3><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>routers <span class="token keyword">import</span> SimpleRouter<span class="token keyword">from</span> <span class="token punctuation">.</span>views <span class="token keyword">import</span> methodsviewset<span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> Testmethodsapp_name <span class="token operator">=</span> <span class="token string">'testviewsets'</span>router <span class="token operator">=</span> SimpleRouter<span class="token punctuation">(</span><span class="token punctuation">)</span>router<span class="token punctuation">.</span>register<span class="token punctuation">(</span>r<span class="token string">''</span><span class="token punctuation">,</span> methodsviewset<span class="token punctuation">)</span>urlpatterns <span class="token operator">=</span> router<span class="token punctuation">.</span>urls</code></pre><h3 id="根-urls-py"><a href="#根-urls-py" class="headerlink" title="根 urls.py"></a>根 urls.py</h3><pre class=" language-python"><code class="language-python">urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>   path<span class="token punctuation">(</span><span class="token string">'test/'</span><span class="token punctuation">,</span>include<span class="token punctuation">(</span><span class="token string">"testviewsets.urls"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span></code></pre><h2 id="解析"><a href="#解析" class="headerlink" title="解析"></a>解析</h2><p>以上代码可产生以下路由,无需显示指定，默认返回的均为 request 的 data 数据。当需要对返回的数据进行操作时，可显示定义该方法，如<code>def list(self,request):</code>则 list 请求会默认使用这个函数进行处理。</p><ul><li>当<code>methods = GET</code>时</li></ul><pre class=" language-python"><code class="language-python">获取listhttp<span class="token punctuation">:</span><span class="token operator">//</span><span class="token number">127.0</span><span class="token punctuation">.</span><span class="token number">0.1</span><span class="token punctuation">:</span><span class="token number">8000</span><span class="token operator">/</span>test<span class="token operator">/</span>获取detailhttp<span class="token punctuation">:</span><span class="token operator">//</span><span class="token number">127.0</span><span class="token punctuation">.</span><span class="token number">0.1</span><span class="token punctuation">:</span><span class="token number">8000</span><span class="token operator">/</span>test<span class="token operator">/</span>id<span class="token operator">/</span></code></pre><ul><li>当<code>methods = POST</code>时</li></ul><pre class=" language-python"><code class="language-python">createhttp<span class="token punctuation">:</span><span class="token operator">//</span><span class="token number">127.0</span><span class="token punctuation">.</span><span class="token number">0.1</span><span class="token punctuation">:</span><span class="token number">8000</span><span class="token operator">/</span>test<span class="token operator">/</span><span class="token punctuation">{</span>json<span class="token punctuation">}</span></code></pre><ul><li>当<code>methods = PUT</code>时</li></ul><pre class=" language-python"><code class="language-python">updatehttp<span class="token punctuation">:</span><span class="token operator">//</span><span class="token number">127.0</span><span class="token punctuation">.</span><span class="token number">0.1</span><span class="token punctuation">:</span><span class="token number">8000</span><span class="token operator">/</span>test<span class="token operator">/</span>id<span class="token operator">/</span><span class="token punctuation">{</span>json<span class="token punctuation">}</span></code></pre><ul><li>当<code>methods = DELETE</code>时</li></ul><pre class=" language-python"><code class="language-python">deletehttp<span class="token punctuation">:</span><span class="token operator">//</span><span class="token number">127.0</span><span class="token punctuation">.</span><span class="token number">0.1</span><span class="token punctuation">:</span><span class="token number">8000</span><span class="token operator">/</span>test<span class="token operator">/</span>id<span class="token operator">/</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
        <tags>
            
            <tag> 学习笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo关于文章</title>
      <link href="/2020/05/28/hexo/"/>
      <url>/2020/05/28/hexo/</url>
      
        <content type="html"><![CDATA[<h1 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h1><h2 id="创建新文章"><a href="#创建新文章" class="headerlink" title="创建新文章"></a>创建新文章</h2><p><code>hexo new [layout] &lt;title&gt;</code></p><h2 id="本地启动服务"><a href="#本地启动服务" class="headerlink" title="本地启动服务"></a>本地启动服务</h2><p><code>hexo s</code></p><h2 id="准备发布"><a href="#准备发布" class="headerlink" title="准备发布"></a>准备发布</h2><p><code>hexo clean</code></p><p><code>hexo deploy</code></p><h2 id="只更新-static-file"><a href="#只更新-static-file" class="headerlink" title="只更新 static file"></a>只更新 static file</h2><p><code>hexo generate</code></p><h2 id="复制-publish-文件夹到-io-文件夹中替换原有的文件，最后-Git-提交到远端仓库"><a href="#复制-publish-文件夹到-io-文件夹中替换原有的文件，最后-Git-提交到远端仓库" class="headerlink" title="复制 publish 文件夹到 io 文件夹中替换原有的文件，最后 Git 提交到远端仓库"></a>复制 publish 文件夹到 io 文件夹中替换原有的文件，最后 Git 提交到远端仓库</h2><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
        <tags>
            
            <tag> 学习笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>douma</title>
      <link href="/2020/05/27/hello/"/>
      <url>/2020/05/27/hello/</url>
      
        <content type="html"><![CDATA[<p>Hello World!<br>I am comming!</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
        <tags>
            
            <tag> 闲话家常 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
